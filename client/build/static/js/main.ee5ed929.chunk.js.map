{"version":3,"sources":["images/san-francisco.jpg","images/cblock.jpg","images/video-file.mp4","components/Container.js","pages/PlayerView/components/Asset.js","components/Button.js","pages/PlayerView/components/AssetViewer.js","images/cursor.svg","pages/PlayerView/components/Cursor.js","pages/PlayerView/components/Cursors.js","helpers/cursors.js","pages/PlayerView/PlayerView.js","reportWebVitals.js","index.js","images/360img.jpg","images/avatar.png"],"names":["StyledPageContainer","styled","div","StyledPageWrapper","Header","header","LogoContainer","Container","img","children","StyledAsset","Asset","props","id","assetType","isActiveAsset","activeAsset","type","style","display","StyledButton","button","isActive","StyledActiveClients","StyledActiveClient","bgColor","Button","onClick","e","asset","label","Object","values","activeClients","map","client","idx","color","pannellumConfig","require","default","StyledAssetViewer","StyledAssetContainer","StyledAssetMenu","AssetViewer","assets","changeActiveAsset","videoTagRef","useRef","playerRef","useEffect","script","document","createElement","src","async","onload","window","pn","destroy","pannellum","viewer","body","appendChild","current","videojs","autoplay","console","log","dispose","getScene","name","loadScene","imgElement","querySelector","getAttribute","path","setAttribute","className","alt","data-vjs-player","width","height","ref","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","fill","points","_ref3","_ref4","x","y","transform","_ref5","SvgCursor","_ref","svgRef","title","titleId","preserveAspectRatio","xmlns","xmlnsXlink","enableBackground","xmlSpace","viewBox","ForwardRef","StyledCursor","Cursor","cursorPropsAreEqual","prevCursor","nextCursor","React","memo","StyledCursors","styles","clientList","clients","css","createCursorCSS","Cursors","getCursorPosition","position","cursorPosition","pitch","yaw","config","getConfig","pitchSin","Math","sin","PI","pitchCos","cos","configPitchSin","configPitchCos","yawCos","z","yawSin","hfovTan","tan","hfov","canvas","getRenderer","getCanvas","canvasWidth","clientWidth","canvasHeight","clientHeight","coord","rollSin","roll","rollCos","getBoundingClientRect","get360CursorPosition","canvasDimensions","minX","left","maxX","right","minY","top","maxY","bottom","assetWindow","getElementById","offsetWidth","offsetLeft","offsetHeight","offsetTop","socket","socketIOClient","query","PlayerView","useState","setClients","initialAssets","setActiveAsset","setAssets","activeAssetRef","on","data","prev","newClients","forEach","inActiveClients","newAssetName","prevAssetName","disconnect","evt","mouseX","mouseY","pctX","pctY","prevMouseX","prevMouseY","setMouseMoveParameters","pageX","pageY","addEventListener","updateClientInterval","setInterval","contains","mouseEventToCoords","emit","removeEventListener","clearInterval","newAsset","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ee5ed929.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/san-francisco.b7cad415.jpg\";","export default __webpack_public_path__ + \"static/media/cblock.02eb09a2.jpg\";","export default __webpack_public_path__ + \"static/media/video-file.1f058b06.mp4\";","import styled from 'styled-components'\r\n\r\n\r\nconst StyledPageContainer = styled.div`\r\n\tmin-height: 100vh;\r\n\tposition: relative;\r\n\twidth: 100%;\r\n`\r\n\r\nconst StyledPageWrapper = styled.div`\r\n\tmargin: 0 auto;\r\n\tmax-width: 1000px;\r\n`\r\n\r\nconst Header = styled.header`\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\twidth: 100%;\r\n`\r\n\r\nconst LogoContainer = styled.div`\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\tpadding: 20px 0;\r\n\twidth: 230px;\r\n`\r\n\r\nconst Logo = styled.img`\r\n\tmax-width: 100px;\r\n\tobject-fit: contain;\r\n`\r\n\r\nconst Container = ({ children }) => {\r\n  return (\r\n    <StyledPageContainer>\r\n\t\t\t<StyledPageWrapper>\r\n\t\t\t\t<Header>\r\n\t\t\t\t\t<LogoContainer>\r\n\t\t\t\t\t\t{/* <Logo src={ tegLogo } />\r\n\t\t\t\t\t\t<Logo src={ gameLogo } /> */}\r\n\t\t\t\t\t</LogoContainer>\r\n\t\t\t\t</Header>\r\n\t\t\t\t{ children }\r\n\t\t\t</StyledPageWrapper>\r\n    </StyledPageContainer>\r\n  );\r\n}\r\n\r\nexport default Container;\r\n","import styled from 'styled-components'\r\n\r\n\r\nconst StyledAsset = styled.div`\r\n\tbottom: 0;\r\n\tbackground-color: black;\r\n\tleft: 0;\r\n\tposition: absolute;\r\n\tright: 0;\r\n\ttop: 0;\r\n\twidth: 100%;\r\n\timg.asset {\r\n\t\theight: 100%;\r\n\t\tobject-fit: contain;\r\n\t\twidth: 100%;\r\n\t}\r\n`\r\n\r\nconst Asset = (props) => {\r\n\tconst id = props.assetType === \"pannellum\" ? \"360\" : props.assetType\r\n\t// const isActiveAsset = (props.activeAsset.type === props.assetType)\r\n\tconst isActiveAsset = (props.activeAsset.type === props.assetType || id === '360')\r\n\treturn (\r\n    <StyledAsset id={id} style={{ display: isActiveAsset ? 'block' : 'none' }}>\r\n\t\t\t\t{ props.children }\r\n    </StyledAsset>\r\n  );\r\n}\r\n\r\nexport default Asset;\r\n","import styled from 'styled-components'\r\n\r\n\r\nconst StyledButton = styled.button`\r\n\tbackground-color: ${props => props.isActive ? '#007bff' : 'transparent'};\r\n\tborder: 2px solid #007bff;\r\n\tborder-radius: 100px;\r\n\t${props => props.isActive && `\r\n\t\tbox-shadow: 0 0 0 0.2rem rgba(38,143,255,.5);\r\n\t`}\r\n\tcolor: ${props => props.isActive ? '#e4e4e4' : '#007bff'};\r\n\tcursor: ${props => props.isActive ? 'default' : 'pointer'};\r\n\tfont-weight: 900;\r\n\tpadding: 8px 20px;\r\n\tposition: relative;\r\n\ttext-transform: uppercase;\r\n\ttransition: all .2s;\r\n\t${props => !props.isActive && `\r\n\t\t&:hover {\r\n\t\t\tbackground-color: #007bff30;\r\n\t\t\t// color: #e4e4e4;\r\n\t\t}\r\n\t`}\r\n`\r\n\r\nconst StyledActiveClients = styled.div`\r\n\tdisplay: flex;\r\n\tleft: 50%;\r\n\tposition: absolute;\r\n\ttop: 120%;\r\n\ttransform: translateX(-50%);\r\n`\r\n\r\nconst StyledActiveClient = styled.div`\r\n\tbackground-color: ${props => props.bgColor};\r\n\tborder-radius: 9999px;\r\n\theight: 5px;\r\n\twidth: 5px;\r\n`\r\n\r\n\r\nconst Button = (props) => {\r\n\r\n\tfunction changeActiveAsset(e) {\r\n\t\tprops.onClick(props.asset)\r\n\t}\r\n\r\n\treturn (\r\n    <StyledButton isActive={ props.isActive } onClick={changeActiveAsset}>\r\n\t\t\t{ props.asset.label }\r\n\t\t\t<StyledActiveClients>\r\n\t\t\t\t{Object.values(props.asset.activeClients).map((client, idx) => (\r\n\t\t\t\t\t<StyledActiveClient key={idx} bgColor={client.color[0]}></StyledActiveClient>\r\n\t\t\t\t))}\r\n\t\t\t</StyledActiveClients>\r\n    </StyledButton>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n","import { useEffect, useRef } from 'react';\r\nimport styled from 'styled-components'\r\nimport videojs from 'video.js'\r\n\r\nimport Asset from 'pages/PlayerView/components/Asset'\r\nimport Button from 'components/Button'\r\n\r\nconst pannellumConfig = {\r\n\t\"autoLoad\": true,\r\n\t\"hotSpotDebug\": true,\r\n\t\"default\": {\r\n\t\t\"firstScene\": \"gallery\",\r\n\t\t\"sceneFadeDuration\": 500\r\n\t},\r\n\t\"scenes\": {\r\n\t\t\"gallery\": {\r\n\t\t\t\"type\": \"equirectangular\",\r\n\t\t\t\"panorama\": require('images/360img.jpg').default,\r\n\t\t\t\"hotSpots\": []\r\n\t\t},\r\n\t\t\"office\": {\r\n\t\t\t\"type\": \"equirectangular\",\r\n\t\t\t\"panorama\": require('images/avatar.png').default,\r\n\t\t\t\"hotSpots\": []\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst StyledAssetViewer = styled.div``\r\n\r\nconst StyledAssetContainer = styled.div`\r\n\tbackground-color: red;\r\n\tborder: 8px solid #e4e4e4;\r\n\theight: 0;\r\n\tpadding-bottom: 56.25%;\r\n\tposition: relative;\r\n\twidth: 100%;\r\n`\r\n\r\nconst StyledAssetMenu = styled.div`\r\n\tbackground-color: #e4e4e4;\r\n\tdisplay: flex;\r\n\tjustify-content: flex-start;\r\n\tpadding: 10px 8px 16px;\r\n\toverflow: hidden;\r\n\twidth: 100%;\r\n\tbutton {\r\n\t\tmargin: 0 5px;\r\n\t}\r\n`\r\n\r\nfunction AssetViewer({ assets, activeAsset, changeActiveAsset }) {\r\n\tconst videoTagRef = useRef()\r\n\tconst playerRef = useRef()\r\n\r\n\tuseEffect(() => {\r\n\r\n    // Attach panellum.js script for 360 images\r\n\t\tconst script = document.createElement(\"script\");\r\n\t\tscript.src = 'https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js'\r\n\t\tscript.async = true;\r\n\t\tscript.onload = () => {\r\n\t\t\tif (window.pn) { window.pn.destroy() }\r\n\t\t\twindow.pn = window.pannellum.viewer('360', pannellumConfig)\r\n\t\t}\r\n\t\tdocument.body.appendChild(script)\r\n\r\n\t\t// instantiate Video.js\r\n\t\tplayerRef.current = videojs(videoTagRef.current, { autoplay: true }, () => {\r\n\t\t\tconsole.log('onPlayerReady', this)\r\n\t\t})\r\n\t\t\r\n\t\treturn () => {\r\n\r\n\t\t\t// destroy player on unmount\r\n\t\t\tif (playerRef.current) {\r\n\t\t\t\tplayerRef.current.dispose()\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\t\tif (activeAsset.type === \"pannellum\") {\r\n\t\t\t\tif (window.pn) {\r\n\t\t\t\t\tlet currentScene = window.pn.getScene()\r\n\t\t\t\t\tif (currentScene !== activeAsset.name) {\r\n\t\t\t\t\t\twindow.pn.loadScene(activeAsset.name)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (activeAsset.type === \"img\") {\r\n\t\t\t\tlet imgElement = document.querySelector('#img img')\r\n\t\t\t\tlet currentSrc = imgElement.getAttribute('src')\r\n\t\t\t\tif (currentSrc !== activeAsset.path) {\r\n\t\t\t\t\timgElement.setAttribute('src', activeAsset.path)\r\n\t\t\t\t}\r\n\t\t\t} else if (activeAsset.type === \"video\") {\r\n\t\t\t\tplayerRef.current.src(activeAsset.path)\r\n\t\t\t}\r\n\t}, [activeAsset])\r\n\r\n  return (\r\n\t\t<StyledAssetViewer>\r\n\t\t\t<StyledAssetContainer id=\"AssetWindow\">\r\n\t\t\t\t{[\"pannellum\", \"img\", \"video\"].map((assetType, idx) => (\r\n\t\t\t\t\t<Asset key={idx} assetType={assetType} activeAsset={activeAsset}>\r\n\t\t\t\t\t\t{assetType === 'img' &&\r\n\t\t\t\t\t\t\t<img className=\"asset\" src=\"\" alt=\"\"/>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{assetType === 'video' &&\r\n\t\t\t\t\t\t\t<div data-vjs-player>\r\n\t\t\t\t\t\t\t\t<video style={{ width:\"100%\", height:\"100%\" }} ref={videoTagRef} className=\"video-js\"></video>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Asset>\r\n\t\t\t\t))}\r\n\t\t\t</StyledAssetContainer>\r\n\t\t\t<StyledAssetMenu>\r\n\t\t\t\t{assets.map((asset, idx) => (\r\n\t\t\t\t\t<Button key={idx} asset={asset} isActive={activeAsset.name === asset.name} onClick={changeActiveAsset} />\r\n\t\t\t\t))}\r\n\t\t\t</StyledAssetMenu>\r\n\t\t</StyledAssetViewer>\r\n  );\r\n}\r\n\r\nexport default AssetViewer;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFFFFF\",\n  points: \"8.2,20.9 8.2,4.9 19.8,16.5 13,16.5 12.6,16.6 \"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"polygon\", {\n  fill: \"#FFFFFF\",\n  points: \"17.3,21.6 13.7,23.1 9,12 12.7,10.5 \"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: 12.5,\n  y: 13.6,\n  transform: \"matrix(0.9221 -0.3871 0.3871 0.9221 -5.7605 6.5909)\",\n  width: 2,\n  height: 8\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"polygon\", {\n  points: \"9.2,7.3 9.2,18.5 12.2,15.6 12.6,15.5 17.4,15.5 \"\n});\n\nfunction SvgCursor(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    preserveAspectRatio: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    enableBackground: \"new 0 0 28 28\",\n    xmlSpace: \"preserve\",\n    viewBox: \"8.20 4.90 11.60 18.20\",\n    width: 100,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3, _ref4, _ref5);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCursor);\nexport default __webpack_public_path__ + \"static/media/cursor.e30e90e3.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\n\r\nimport styled from 'styled-components'\r\nimport {ReactComponent as CursorSVG} from 'images/cursor.svg'\r\n\r\n\r\nconst StyledCursor = styled.div`\r\n\tsvg {\r\n\t\twidth: 15px;\r\n\t}\r\n\tspan {\r\n\t\tbackground-color: ${props => props.color[0]};\r\n\t\tborder: 1px solid ${props => props.color[1]};\r\n\t\tborder-radius: 8px;\r\n\t\tcolor: ${props => props.color[1]};\r\n\t\tfont-size: 10px;\r\n\t\tleft: 135%;\r\n\t\tpadding: 0 5px;\r\n\t\tposition: absolute;\r\n\t\ttop: 15px;\r\n\t}\r\n`\r\n\t\r\nconst Cursor = ({id, name, color}) => {\r\n\r\n\tconsole.log('re-rendered cursor: ', id)\r\n\r\n\treturn (\r\n\t\t\t<StyledCursor id={id} className=\"cursor\" color={color}>\r\n\t\t\t\t<CursorSVG />\r\n\t\t\t\t<span>{id}</span>\r\n\t\t\t</StyledCursor>\r\n  )\r\n}\r\n\r\nfunction cursorPropsAreEqual(prevCursor, nextCursor) {\r\n\treturn prevCursor.id === nextCursor.id \r\n\t\t&& prevCursor.name === nextCursor.name\r\n}\r\n\r\nexport default React.memo(Cursor, cursorPropsAreEqual);\r\n","import styled, { css } from 'styled-components'\r\nimport Cursor from 'pages/PlayerView/components/Cursor'\r\n\r\n\r\nfunction createCursorCSS(props) {\r\n\tlet styles = ''\r\n\tlet clientList = Object.values(props.clients)\r\n\tfor (let i = 0; i < clientList.length; i++) {\r\n\t\tstyles += `\r\n\t\t\t#${clientList[i].id} {\r\n\t\t\t\ttransform: translate(${clientList[i].x}px, ${clientList[i].y}px);\r\n\t\t\t\tdisplay: ${clientList[i].display};\r\n\t\t\t}\r\n\t\t`\r\n\t}\r\n\treturn css`${styles}`\r\n}\r\n\r\nconst StyledCursors = styled.div`\r\n\t${props => createCursorCSS(props)}\r\n`\r\n\r\nconst Cursors = (props) => {\r\n\treturn (\r\n    // <div id=\"cursors\" clients={props.clients}>\r\n\t\t// \t{Object.values(props.clients).map((client, idx) => (\r\n\t\t// \t\t<Cursor key={client.id} client={client}></Cursor>\r\n\t\t// \t))}\r\n    // </div>\r\n    <StyledCursors id=\"cursors\" clients={props.clients}>\r\n\t\t\t{Object.values(props.clients).map((client, idx) => (\r\n\t\t\t\t<Cursor\r\n\t\t\t\t\tkey={client.id}\r\n\t\t\t\t\tid={client.id}\r\n\t\t\t\t\tname={client.name}\r\n\t\t\t\t\tcolor={client.color}\r\n\t\t\t\t></Cursor>\r\n\t\t\t))}\r\n    </StyledCursors>\r\n  )\r\n}\r\n\r\nexport default Cursors\r\n","\r\nexport function getCursorPosition(position, activeAsset) {\r\n\tlet x, y, display = 'block'\r\n\tif (activeAsset.type === 'pannellum') {\r\n\t\tlet cursorPosition = get360CursorPosition(position, window.pn)\r\n\t\tx = cursorPosition[0]\r\n\t\ty = cursorPosition[1]\r\n\r\n\t\t// set display to none if cursor is out of view on 360 images\r\n\t\tlet canvasDimensions = window.pn.getRenderer().getCanvas().getBoundingClientRect()\r\n\t\tlet minX = canvasDimensions.left\r\n\t\tlet maxX = canvasDimensions.right\r\n\t\tlet minY = canvasDimensions.top\r\n\t\tlet maxY = canvasDimensions.bottom\r\n\t\tif (x < minX || x > maxX || y < minY || y > maxY) {\r\n\t\t\tdisplay = 'none'\r\n\t\t}\r\n\r\n\t} else {\r\n\t\tlet assetWindow = document.getElementById('AssetWindow')\r\n\t\tx = assetWindow.offsetWidth * position[0] + assetWindow.offsetLeft\r\n\t\ty = assetWindow.offsetHeight * position[1] + assetWindow.offsetTop\r\n\t}\r\n\treturn [x, y, display]\r\n}\r\n\r\nfunction get360CursorPosition(position, pannellum) {\r\n\r\n  let [pitch, yaw] = position\r\n  let config = pannellum.getConfig()\r\n  let pitchSin = Math.sin(pitch * Math.PI / 180)\r\n  let pitchCos = Math.cos(pitch * Math.PI / 180)\r\n  let configPitchSin = Math.sin(config.pitch * Math.PI / 180)\r\n  let configPitchCos = Math.cos(config.pitch * Math.PI / 180)\r\n  let yawCos = Math.cos((-yaw + config.yaw) * Math.PI / 180)\r\n  let z = pitchSin * configPitchSin + pitchCos * yawCos * configPitchCos\r\n\r\n  if ((yaw <= 90 && yaw > -90 && z <= 0) ||\r\n    ((yaw > 90 || yaw <= -90) && z <= 0)) {\r\n\t\treturn [0, 0]\r\n  } else {\r\n\t\tvar yawSin = Math.sin((-yaw + config.yaw) * Math.PI / 180),\r\n\t\t\t\thfovTan = Math.tan(config.hfov * Math.PI / 360);\r\n\t\t// Subpixel rendering doesn't work in Firefox\r\n\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=739176\r\n\t\tvar canvas = pannellum.getRenderer().getCanvas(),\r\n\t\t\t\tcanvasWidth = canvas.clientWidth,\r\n\t\t\t\tcanvasHeight = canvas.clientHeight\r\n\t\tvar coord = [-canvasWidth / hfovTan * yawSin * pitchCos / z / 2,\r\n\t\t\t\t-canvasWidth / hfovTan * (pitchSin * configPitchCos -\r\n\t\t\t\t\tpitchCos * yawCos * configPitchSin) / z / 2]\r\n\t\t// Apply roll \r\n\t\tvar rollSin = Math.sin(config.roll * Math.PI / 180),\r\n\t\t\t\trollCos = Math.cos(config.roll * Math.PI / 180)\r\n\t\tcoord = [coord[0] * rollCos - coord[1] * rollSin,\r\n\t\t\t\t\t\t\tcoord[0] * rollSin + coord[1] * rollCos]\r\n\t\tcoord[0] += (canvasWidth) / 2 + canvas.getBoundingClientRect().x\r\n\t\tcoord[1] += (canvasHeight) / 2 + canvas.getBoundingClientRect().y\r\n\t\treturn coord\r\n  }\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport socketIOClient from \"socket.io-client\"\r\n\r\nimport Container from 'components/Container'\r\nimport AssetViewer from 'pages/PlayerView/components/AssetViewer'\r\nimport Cursors from 'pages/PlayerView/components/Cursors'\r\n\r\nimport { getCursorPosition } from 'helpers/cursors'\r\n\r\nconst SERVER = \"http://localhost:4001/\"\r\nconst socket = socketIOClient(SERVER, {query: 'name=Mary'})\r\n\r\nfunction PlayerView() {\r\n\tconst [clients, setClients] = useState({})\r\n\tconst [activeAsset, setActiveAsset] = useState(initialAssets[2])\r\n\tconst [assets, setAssets] = useState(initialAssets)\r\n\tconst activeAssetRef = useRef(activeAsset)\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tsocket.on('create', function(data) {\r\n\t\t\tsetClients(prev => {\r\n\t\t\t\tlet newClients = {...prev}\r\n\t\t\t\tnewClients[data.id] = data\r\n\t\t\t\treturn newClients\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tsocket.on('delete', function(data) {\r\n\t\t\tsetClients(prev => {\r\n\t\t\t\tlet newClients = {...prev}\r\n\t\t\t\tdelete newClients[data.id]\r\n\t\t\t\treturn newClients\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tsocket.on('update', function(data) {\r\n\t\t\tlet display = (data.display === 'block' && data.activeAsset.name === activeAssetRef.current.name) ? 'block' : 'none'\r\n\t\t\tsetClients(prev => {\r\n\t\t\t\tlet newClients = {...prev}\r\n\t\t\t\tif (display === 'block') {\r\n\t\t\t\t\tlet cursorPosition = getCursorPosition(data.position, data.activeAsset)\r\n\t\t\t\t\tnewClients[data.id].x = cursorPosition[0]\r\n\t\t\t\t\tnewClients[data.id].y = cursorPosition[1]\r\n\t\t\t\t\tdisplay = cursorPosition[2]\r\n\t\t\t\t}\r\n\t\t\t\tnewClients[data.id].display = display\r\n\t\t\t\tnewClients[data.id].activeAsset = data.activeAsset.name\r\n\t\t\t\treturn newClients\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tsocket.on('changeAsset', function(data) {\r\n\t\t\t// update activeClients for each asset, triggered by asset change\r\n\t\t\tsetAssets(prev => {\r\n\t\t\t\tlet assets = prev\r\n\t\t\t\tassets.forEach((asset) => {\r\n\t\t\t\t\tlet inActiveClients = data.id in asset.activeClients\r\n\t\t\t\t\tif (asset.name === data.newAssetName) {\r\n\t\t\t\t\t\t// add data.id to asset's activeClients if not already present\r\n\t\t\t\t\t\tif (!inActiveClients) {\r\n\t\t\t\t\t\t\tasset.activeClients[data.id] = {color: data.client.color, name: data.client.name}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (asset.name === data.prevAssetName) {\r\n\t\t\t\t\t\t// remove data.id from asset's activeClients if present\r\n\t\t\t\t\t\tif (inActiveClients) {\r\n\t\t\t\t\t\t\tdelete asset.activeClients[data.id]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn assets\r\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tsocket.on('updateClients', function(data) {\r\n\t\t\tlet newClients = {}\r\n\t\t\tObject.values(data.clients).forEach((client) => {\r\n\t\t\t\tif (client.id !== socket.id) {\r\n\t\t\t\t\tlet display = (client.display === 'block' && client.activeAsset.name === activeAssetRef.current.name) ? 'block' : 'none'\r\n\t\t\t\t\tif (display === 'block') {\r\n\t\t\t\t\t\tlet cursorPosition = getCursorPosition(client.position, client.activeAsset)\r\n\t\t\t\t\t\tclient.x = cursorPosition[0]\r\n\t\t\t\t\t\tclient.y = cursorPosition[1]\r\n\t\t\t\t\t\tdisplay = cursorPosition[2]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclient.display = display\r\n\t\t\t\t\tclient.activeAsset = client.activeAsset.name\r\n\t\t\t\t\tnewClients[client.id] = client\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tsetClients(newClients)\r\n\t\t})\r\n\r\n\t\treturn () => {\r\n\t\t\tsocket.disconnect()\r\n\t\t}\r\n\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\r\n\t\tlet evt, mouseX, mouseY, pctX, pctY, position, prevMouseX, prevMouseY\r\n\r\n\t\tdocument.addEventListener('mousemove', setMouseMoveParameters)\r\n\t\tfunction setMouseMoveParameters(e) {\r\n\t\t\tmouseX = e.pageX\r\n\t\t\tmouseY = e.pageY\r\n\t\t\tevt = e\r\n\t\t}\r\n\r\n\t\tlet updateClientInterval = window.setInterval(function() {\r\n\t\t\tif (prevMouseX !== mouseX || prevMouseY !== mouseY) {\r\n\t\t\t\tlet assetWindow = document.getElementById('AssetWindow')\r\n\t\t\t\tlet display = assetWindow.contains(evt.target) ? 'block' : 'none'\r\n\r\n\t\t\t\tif (activeAsset.type === 'pannellum') {\r\n\t\t\t\t\tposition = window.pn.mouseEventToCoords(evt)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tpctX = (mouseX - assetWindow.offsetLeft) / assetWindow.offsetWidth\r\n\t\t\t\t\tpctY = (mouseY - assetWindow.offsetTop) / assetWindow.offsetHeight\r\n\t\t\t\t\tposition = [pctX, pctY]\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsocket.emit('update', {\r\n\t\t\t\t\tid: socket.id,\r\n\t\t\t\t\tdisplay: display,\r\n\t\t\t\t\tactiveAsset: activeAsset,\r\n\t\t\t\t\tposition: position,\r\n\t\t\t\t})\r\n\t\t\t\tprevMouseX = mouseX\r\n\t\t\t\tprevMouseY = mouseY\r\n\t\t\t}\r\n\t\t}, 100)\r\n\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('mousemove', setMouseMoveParameters)\r\n\t\t\twindow.clearInterval(updateClientInterval)\r\n\t\t}\r\n\r\n\t}, [activeAsset])\r\n\r\n\r\n\tfunction changeActiveAsset(newAsset) {\r\n\t\tif (newAsset.name !== activeAsset.name) {\r\n\t\t\tsetActiveAsset(newAsset)\r\n\t\t\tactiveAssetRef.current = newAsset\r\n\t\t\tsocket.emit('changeAsset', {\r\n\t\t\t\tid: socket.id,\r\n\t\t\t\tnewAssetName: newAsset.name,\r\n\t\t\t\tprevAssetName: activeAsset.name,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n  return (\r\n\t\t<Container>\r\n\t\t\t<AssetViewer assets={assets}  activeAsset={activeAsset} changeActiveAsset={changeActiveAsset}></AssetViewer>\r\n\t\t\t<Cursors clients={clients}></Cursors>\r\n\t\t</Container>\r\n  )\r\n}\r\n\r\nexport default PlayerView;\r\n\r\n\r\nconst initialAssets = [\r\n\t{\r\n\t\t\"path\": require('images/san-francisco.jpg').default,\r\n\t\t\"name\": \"gallery\",\r\n\t\t\"label\": \"San Francisco\",\r\n\t\t\"type\": \"pannellum\",\r\n\t\t\"activeClients\": {},\r\n\t},\r\n\t{\r\n\t\t\"path\": require('images/360img.jpg').default,\r\n\t\t\"name\": \"office\",\r\n\t\t\"label\": \"Office\",\r\n\t\t\"type\": \"pannellum\",\r\n\t\t\"activeClients\": {},\r\n\t},\r\n\t{\r\n\t\t\"path\": require('images/avatar.png').default,\r\n\t\t\"name\": \"avatar\",\r\n\t\t\"label\": \"Avatar\",\r\n\t\t\"type\": \"img\",\r\n\t\t\"activeClients\": {},\r\n\t},\r\n\t{\r\n\t\t\"path\": require('images/cblock.jpg').default,\r\n\t\t\"name\": \"cblock\",\r\n\t\t\"label\": \"C-Block\",\r\n\t\t\"type\": \"img\",\r\n\t\t\"activeClients\": {},\r\n\t},\r\n\t{\r\n\t\t\"path\": require('images/video-file.mp4').default,\r\n\t\t\"name\": \"cartoon\",\r\n\t\t\"label\": \"Video\",\r\n\t\t\"type\": \"video\",\r\n\t\t\"activeClients\": {},\r\n\t},\r\n]\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport PlayerView from 'pages/PlayerView/PlayerView';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <PlayerView />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export default __webpack_public_path__ + \"static/media/360img.27ef5092.jpg\";","export default __webpack_public_path__ + \"static/media/avatar.32e70a97.png\";"],"sourceRoot":""}